(function(n,s,b,p){var c={};n.iq?c=n.iq:n.iq=c;c.inputform={};c.inputform.FieldType={TEXT:"Text",TEXTAREA:"TextArea",SELECT:"Select",CHECKBOX:"Checkbox",DATETIME:"DateTime",DATETIMELOCAL:"DateTimeLocal",MONTH:"Month",NUMBER:"Number",WEEK:"Week",LABEL:"Label",CHECKLIST:"CheckList"};c.inputform.Field=function(b,a,c,d,f,m,k,g){this.description=c;this.type=d;this.position=f;this.tab=m;this.meta=g;this.isnewline=a;this.isrequired=b;this.value=k;this.id="inputfield-"+this.createGuid()};c.inputform.Field.prototype.createGuid=
    function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"===b?a:a&3|8).toString(16)})};c.inputform.Control=function(c,a,h,d){this.parentControl=b("#"+c);this.parentID=c;this.fields=[];this.tabs=[];this.canSave=a;this.isDirty=!1;this.requiredMessage=h;this.validationErrorMessage=d};c.inputform.Control.prototype.show=function(){var c=this,a="";this.parentControl.empty();this.getTabList();if(0<this.tabs.length)a=this.addTabControls(c),this.parentControl.append(a),
    b("#tabs").smartTab({autoProgress:!1,stopOnFocus:!0,transitionEffect:"none",autoHeight:!0});else{var h=this.fields;h.sort(function(a,b){return a.position-b.position});a=a+"<div class='inputform_MainDiv'>"+this.addControls(h);a+="</div>";this.parentControl.append(a)}a="<div class='inputform_SaveDiv'>"+("<input disabled id='inputform-"+this.parentID+"-SaveButton' type='button' value='Save' />");a+="<input disabled id='inputform-"+this.parentID+"-CancelButton' type='button' value='Cancel' />";this.canSave&&
this.parentControl.append(a+"</div>");b("#"+this.parentID).change(function(a){c.checkDirtyStatus(a.target)});b("#"+this.parentID).keyup(function(a){c.checkDirtyStatus(a.target)});b("#inputform-"+this.parentID+"-CancelButton").click(function(a){c.resetAllControls()});b("#inputform-"+this.parentID+"-SaveButton").click(function(a){c.saveAllControls()})};c.inputform.Control.prototype.saveAllControls=function(){if(!1===this.validateAllFields())b("#errormsg").text(this.validationErrorMessage);else{var c=
    null,a=this;b("#"+this.parentID).find("[id^='inputfield-']").each(function(){c=this.localName;var h=this.id,d=null;b(a.fields).each(function(a){this.id===h&&(d=a)});switch(c){case "textarea":a.fields[d].value=[];a.fields[d].value.push(b(this).val());break;case "input":if("checkbox"===this.type)if(-1===this.id.indexOf(":"))a.fields[d].value=[],this.checked&&a.fields[d].value.push("checked");else{var f=this.id.split(":");b(a.fields).each(function(a){this.id===f[0]&&(d=a)});a.fields[d].value[f[1]]="";
    this.checked&&(a.fields[d].value[f[1]]=a.fields[d].meta.options[f[1]])}else{a.fields[d].value=[];a.fields[d].value.push(b(this).val());break}break;case "select":a.fields[d].value=[],a.fields[d].value.push(b(this).val())}});this.show();this.setDirty(!1)}};c.inputform.Control.prototype.validateAllFields=function(){var l=!0;b(this.fields).each(function(){this.isrequired&&this.type!==c.inputform.FieldType.CHECKBOX&&this.type!==c.inputform.FieldType.CHECKLIST&&this.type!==c.inputform.FieldType.SELECT&&
    ""===b("#"+this.id).val()&&(l=!1)});return l};c.inputform.Control.prototype.resetAllControls=function(){var c=null;b("#"+this.parentID).find("[id^='inputfield-']").each(function(){c=this.localName;switch(c){case "textarea":b(this).val(b(this).attr("data"));break;case "input":"checkbox"===this.type?(b(this).prop("checked",!1),"checked"===b(this).attr("data")&&b(this).prop("checked",!0)):b(this).val(b(this).attr("data"));break;case "select":""!==b(this).attr("data")?b(this).val(b(this).attr("data")):
    b(this).val(b(this).children()[0].value)}});b("#errormsg").text("");this.setDirty(!1)};c.inputform.Control.prototype.checkDirtyStatus=function(c){b(c).attr("data")!==p&&b(c).attr("data")!==b(c).val()&&this.setDirty(!0)};c.inputform.Control.prototype.setDirty=function(c){this.isDirty=c;b("#inputform-"+this.parentID+"-SaveButton").prop("disabled",!c);b("#inputform-"+this.parentID+"-CancelButton").prop("disabled",!c)};c.inputform.Control.prototype.addTabControls=function(c){var a="",h="",d=0,f=null,
    a=a+"<div id='tabs'><ul>";b(this.tabs).each(function(){f=this;a+="<li><a href='#tabs-"+d+"'>"+f+"</a></li>";h+="<div id='tabs-"+d+"'>";var m=b.grep(c.fields,function(a){return a.tab.toString()===f.toString()});m.sort(function(a,b){return a.position-b.position});h+=c.addControls(m);h+="</div>";d++});a+="</ul>";a+=h;return a+="</div>"};c.inputform.Control.prototype.addControls=function(l){var a="",h=!1,d=!1,f=!1===this.canSave?"disabled":"",m=0,a=a+"<table class='inputform_MainTable' >";b(l).each(function(){!0===
    this.isnewline&&(!1===h?h=!0:a+="</tr>",a+="<tr>");a+=this.type===c.inputform.FieldType.TEXTAREA?"<td colspan='2'>":"<td>";!0===this.isrequired&&(a+="<label class='inputform_labelStyle'>* </label>",d=!0);a+="<label class='"+(this.type===c.inputform.FieldType.LABEL?"stMain_Desc_Label":"stMain_Desc_Normal")+"'>"+this.description+"</label>";a=this.type===c.inputform.FieldType.TEXTAREA?a+"<table><tr>":this.type===c.inputform.FieldType.CHECKLIST?a+"<table class='inputform_CheckList'>":a+"</td>";var k=
    "",g=null===this.value||this.value===p?[]:this.value;switch(this.type){case c.inputform.FieldType.TEXT:var e=this.meta.placeholder===p?"":this.meta.placeholder,l=0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+" type='text' placeholder='"+e+"' class='inputform_Text' value='"+l+"' data='"+l+"'></td>";break;case c.inputform.FieldType.TEXTAREA:e=0<b(g).length?b(g)[0]:"";a+="<td colspan='4' ><textarea id='"+this.id+"' "+f+" class='inputform_TextArea'  data='"+e+"'>"+e+"</textarea></td></tr></table></td>";
    break;case c.inputform.FieldType.CHECKLIST:var n=this,q=0;b(this.meta.options).each(function(){var a=-1!==g.indexOf(this.toString())?"checked":"";k+="<tr><td><label class='inputform_CheckListLabel'>"+this+"</label></td> <td class='inputform_CheckListRow'><input id='"+n.id+":"+ +q+"' "+f+"  type='checkbox' "+a+" data='"+a+"'></td></tr>";q++});a+=k+"</table></td>";break;case c.inputform.FieldType.SELECT:var r=0<b(g).length?b(g)[0]:"";b(this.meta.options).each(function(){k+="<option value='"+this+"' "+
    (r===this.toString()?"selected":"")+">"+this+"</option>"});a+="<td><select id='"+this.id+"' "+f+" class='inputform_Select'  data='"+r+"'>"+k+"</select></td>";break;case c.inputform.FieldType.CHECKBOX:e=0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+"  type='checkbox' "+e+"  data='"+e+"'></td>";break;case c.inputform.FieldType.DATETIME:e=0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+"  type='date' class='inputform_DateTime'  value='"+e+"' data='"+e+"'></td>";break;case c.inputform.FieldType.DATETIMELOCAL:e=
    0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+"  type='datetime-local' value='"+e+"' data='"+e+"'></td>";break;case c.inputform.FieldType.MONTH:e=0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+"  type='month' value='"+e+"' data='"+e+"'></td>";break;case c.inputform.FieldType.NUMBER:e=0<b(g).length?b(g)[0]:"";a+="<td><input id='"+this.id+"' "+f+"  type='number' value='"+e+"' data='"+e+"'></td>";break;case c.inputform.FieldType.WEEK:e=0<b(g).length?b(g)[0]:"",a+="<td><input id='"+
    this.id+"' "+f+"  type='week' value='"+e+"' data='"+e+"'></td>"}m++});a+="</tr></table>";!0===d&&(a+="<div class='inputform_requiredMessage' >"+this.requiredMessage+"</div>");return a+="<div id='errormsg' class='inputform_errorMessage' ></div>"};c.inputform.Control.prototype.getTabList=function(){var c=this;b(this.fields).each(function(){-1===c.tabs.indexOf(this.tab)&&""!==this.tab&&this.tab!==p&&c.tabs.push(this.tab)})}})(window,document,jQuery);